const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/QuoteShake-CcYd1XsT.js","assets/js/vue-DO4TrDDV.js","assets/js/tiny-BodeErl7.js","assets/css/tiny-bJ4gvHvs.css","assets/css/QuoteShake-zY-9_SM0.css","assets/js/AboutView-296lhRp_.js","assets/css/AboutView-BrHt89t5.css","assets/js/BookDetailView-Cd7MkpXc.js","assets/css/BookDetailView-DAIfdyF3.css","assets/js/BookReadView-DrKC62dv.js","assets/css/BookReadView-CLMhOE3s.css","assets/js/BooksView-Sjl6j7KM.js","assets/css/BooksView-ByPzJ_PY.css","assets/js/CommunityView-CVZ_LZJ2.js","assets/css/CommunityView-BqMw23zc.css","assets/js/CoursesView-De-lzx_q.js","assets/css/CoursesView-B56Q9aIs.css","assets/js/FestivalView-e99Mi1jq.js","assets/js/ForgotPasswordView-B62w7pLQ.js","assets/css/ForgotPasswordView-DuZE4SsL.css","assets/js/HomeView-CcJI2Iiu.js","assets/css/HomeView-CESjA-F5.css","assets/js/ImagesTestView-BnraDeN7.js","assets/css/ImagesTestView-xqcvyyKM.css","assets/js/LearningCenterView-C1im3Z_2.js","assets/css/LearningCenterView-C1aMEZKp.css","assets/js/LoginView-yys2zCQD.js","assets/css/LoginView-Di2oKkW6.css","assets/js/QuizPlayView-CdiB2L3q.js","assets/css/QuizPlayView-BFOZpAOs.css","assets/js/QuizResultView-BKTauwfI.js","assets/css/QuizResultView-mD5_oKYC.css","assets/js/QuizView-BsUpdNfx.js","assets/css/QuizView-C52ZRvhj.css","assets/js/QuotesView-DFz4NPjn.js","assets/css/QuotesView-F3IgRcb6.css","assets/js/RegisterView-CS7j7YW-.js","assets/css/RegisterView-B7DHscIj.css","assets/js/UserOnboardingView-cnYkhZm4.js","assets/css/UserOnboardingView-K55tmIIo.css","assets/js/UserProfileView-B_hkmcTa.js","assets/css/UserProfileView-CkMqWAyD.css"])))=>i.map(i=>d[i]);
import{d as H,f as b,l as M,v as L,A as O,x as e,F,I as se,a7 as le,O as X,P as Z,a8 as x,w as E,a9 as ue,b as v,z as S,H as p,j as I,a as ce,D as N,aa as de,L as y,K as me,ab as J,ac as _e,ad as ve,$ as pe,Q,ae as fe,af as he}from"./vue-DO4TrDDV.js";import{i as ge}from"./tiny-BodeErl7.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(n){if(n.ep)return;n.ep=!0;const l=o(n);fetch(n.href,l)}})();const we="modulepreload",Ee=function(r){return"/guoxue-classic/"+r},ee={},u=function(t,o,i){let n=Promise.resolve();if(o&&o.length>0){let s=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),_=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));n=s(o.map(d=>{if(d=Ee(d),d in ee)return;ee[d]=!0;const h=d.endsWith(".css"),A=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${A}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":we,h||(m.as="script"),m.crossOrigin="",m.href=d,_&&m.setAttribute("nonce",_),document.head.appendChild(m),h)return new Promise((V,U)=>{m.addEventListener("load",V),m.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${d}`)))})}))}function l(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return n.then(s=>{for(const c of s||[])c.status==="rejected"&&l(c.reason);return t().catch(l)})},f={BOOK_COVER:"book-cover",AVATAR:"avatar",ARTICLE:"article",BANNER:"banner",QUOTE:"quote",DEFAULT:"default"},te={[f.BOOK_COVER]:{width:200,height:300,bgColor:"#f9e9d6",textColor:"#842029",text:"经典书籍",fontSize:18},[f.AVATAR]:{width:120,height:120,bgColor:"#e6f7ff",textColor:"#842029",text:"用户头像",fontSize:14},[f.ARTICLE]:{width:800,height:450,bgColor:"#f0f7ec",textColor:"#842029",text:"文章配图",fontSize:24},[f.BANNER]:{width:1200,height:300,bgColor:"#eae2d8",textColor:"#842029",text:"国学经典",fontSize:36},[f.QUOTE]:{width:600,height:400,bgColor:"#f5f5f5",textColor:"#842029",text:"经典名句",fontSize:24},[f.DEFAULT]:{width:300,height:200,bgColor:"#f7f7f7",textColor:"#842029",text:"图片加载失败",fontSize:16}};function G(r=f.DEFAULT,t,o){const i=te[r]||te[f.DEFAULT],n=t||i.text,l=document.createElement("canvas");l.width=i.width,l.height=i.height;const s=l.getContext("2d");if(!s)return"";s.fillStyle=i.bgColor,s.fillRect(0,0,i.width,i.height),s.strokeStyle=i.textColor,s.lineWidth=3,s.strokeRect(5,5,i.width-10,i.height-10),s.fillStyle=i.textColor,s.font=`${i.fontSize}px "STXihei", "Microsoft YaHei", sans-serif`,s.textAlign="center",s.textBaseline="middle";const c=n.split(`
`),_=i.fontSize*1.5,d=i.height/2-(c.length-1)*_/2;c.forEach((A,m)=>{s.fillText(A,i.width/2,d+m*_)});const h=l.toDataURL("image/png");return o&&Ae(h,o),h}function Ae(r,t){const o=document.createElement("a");o.href=r,o.download=t.endsWith(".png")?t:`${t}.png`,document.body.appendChild(o),o.click(),document.body.removeChild(o)}function oe(r,t=f.DEFAULT,o){const i=o||r.src,l=ie(i).match(/([^\/]+)(?:\.\w+)?$/),s=l?decodeURIComponent(l[1]).replace(/[-_]/g," "):"图片加载失败",c=G(t,s);r.src=c,r.setAttribute("data-original-src",i),r.setAttribute("title",`原图加载失败: ${s}`),r.onclick=()=>{const _=r.getAttribute("data-original-src");_&&(r.src=_)}}function ie(r){try{return new URL(r).pathname.split("/").pop()||"unknown"}catch{return r.split("/").pop()||"unknown"}}function Ve(){document.addEventListener("error",r=>{const t=r.target;if(t.tagName==="IMG"){const o=t;let i=f.DEFAULT;o.classList.contains("book-cover")?i=f.BOOK_COVER:o.classList.contains("avatar")?i=f.AVATAR:o.classList.contains("article-img")?i=f.ARTICLE:o.classList.contains("banner")?i=f.BANNER:o.classList.contains("quote-img")&&(i=f.QUOTE),oe(o,i)}},!0)}function ye(r,t=f.DEFAULT){r.forEach((o,i)=>{const n=ie(o),l=`图片加载失败
${n}`;G(t,l,`placeholder-${i+1}-${n}`)})}const k={generatePlaceholderImage:G,handleImageError:oe,initGlobalImageErrorHandler:Ve,batchGeneratePlaceholders:ye,IMAGE_TYPES:f},be={key:0,class:"image-error-handler"},Le={class:"handler-header"},Re={class:"badge"},Ie={class:"handler-content"},Te={class:"control-panel"},Pe={class:"form-group"},Oe=["value"],ke={class:"failed-images-list"},De={class:"image-url"},Ce=["onClick"],qe=H({__name:"ImageErrorHandler",setup(r){const t=b([]),o=b("default"),i=Object.keys(k.IMAGE_TYPES),n=()=>{t.value=Array.from(document.querySelectorAll("img[data-original-src]")).map(c=>c.getAttribute("data-original-src")).filter(Boolean)},l=()=>{t.value.length>0&&k.batchGeneratePlaceholders(t.value,o.value)},s=(c,_)=>{const d=c.split("/").pop()||`image-${_}`;k.generatePlaceholderImage(o.value,`图片${_+1}
${d}`,`placeholder-${_+1}`)};return M(()=>{setTimeout(n,1e3),document.addEventListener("error",c=>{c.target instanceof HTMLImageElement&&setTimeout(n,200)},!0)}),(c,_)=>t.value.length>0?(E(),L("div",be,[e("div",Le,[_[1]||(_[1]=e("h3",null,"图片错误处理工具",-1)),e("span",Re,F(t.value.length),1)]),e("div",Ie,[e("div",Te,[e("div",Pe,[_[2]||(_[2]=e("label",{for:"placeholderType"},"占位图类型：",-1)),se(e("select",{id:"placeholderType","onUpdate:modelValue":_[0]||(_[0]=d=>o.value=d)},[(E(!0),L(X,null,Z(x(i),d=>(E(),L("option",{key:d,value:d},F(d),9,Oe))),128))],512),[[le,o.value]])]),e("button",{class:"generate-all-button",onClick:l},"生成所有占位图"),e("button",{class:"refresh-button",onClick:n},"刷新列表")]),e("div",ke,[(E(!0),L(X,null,Z(t.value,(d,h)=>(E(),L("div",{key:d,class:"failed-image-item"},[e("div",De,F(d),1),e("button",{class:"generate-button",onClick:A=>s(d,h)}," 生成 ",8,Ce)]))),128))])])])):O("",!0)}}),W=(r,t)=>{const o=r.__vccOpts||r;for(const[i,n]of t)o[i]=n;return o},ze=W(qe,[["__scopeId","data-v-e7ce8adc"]]),Se={class:"header-content"},xe={class:"user-actions"},$e={key:0,class:"mobile-nav"},Ue=15,Be=H({__name:"App",setup(r){const t=ce(()=>u(()=>import("./QuoteShake-CcYd1XsT.js"),__vite__mapDeps([0,1,2,3,4]))),o=b("1"),i=de(),n=b(!1),l=()=>{n.value=window.innerWidth<=768},s=b(!1);let c=0,_=0,d=0,h=0;const A=T=>{const a=Date.now();if(a-c>100){const g=T.accelerationIncludingGravity;if(g){const D=g.x||0,R=g.y||0,z=g.z||0,B=a-c;Math.abs(D+R+z-_-d-h)/B*1e4>Ue&&m(),_=D,d=R,h=z,c=a}}},m=()=>{s.value=!0},V=()=>{s.value=!1};function U(T,a){let g=0;return function(...D){const R=Date.now();R-g>=a&&(g=R,T(...D))}}const j=U(l,200),K=()=>["/","/books","/login","/register"].includes(i.path);return M(()=>{l(),window.addEventListener("resize",j),window.DeviceMotionEvent&&n.value&&window.addEventListener("devicemotion",A)}),ue(()=>{window.removeEventListener("resize",j),window.DeviceMotionEvent&&window.removeEventListener("devicemotion",A)}),(T,a)=>{const g=I("tiny-menu-item"),D=I("tiny-menu"),R=I("tiny-button"),z=I("tiny-header"),B=I("tiny-main"),Y=I("tiny-footer"),ne=I("tiny-layout"),C=I("router-link");return E(),L("div",{class:N(["common-layout",{"is-mobile":n.value}])},[v(ne,null,{default:p(()=>[v(z,null,{default:p(()=>[e("div",Se,[a[12]||(a[12]=e("div",{class:"logo"},[e("h1",null,"国学经典")],-1)),v(D,{"default-active":o.value,class:"tiny-menu-demo",mode:"horizontal",router:""},{default:p(()=>[v(g,{index:"/"},{default:p(()=>a[2]||(a[2]=[y("首页")])),_:1,__:[2]}),v(g,{index:"/books"},{default:p(()=>a[3]||(a[3]=[y("经典书籍")])),_:1,__:[3]}),v(g,{index:"/quiz"},{default:p(()=>a[4]||(a[4]=[y("知识测验")])),_:1,__:[4]}),v(g,{index:"/courses"},{default:p(()=>a[5]||(a[5]=[y("国学讲堂")])),_:1,__:[5]}),v(g,{index:"/community"},{default:p(()=>a[6]||(a[6]=[y("学习社区")])),_:1,__:[6]}),v(g,{index:"/learning-center"},{default:p(()=>a[7]||(a[7]=[y("学习中心")])),_:1,__:[7]}),v(g,{index:"/about"},{default:p(()=>a[8]||(a[8]=[y("关于我们")])),_:1,__:[8]}),v(g,{index:"/images-test"},{default:p(()=>a[9]||(a[9]=[y("图片测试")])),_:1,__:[9]})]),_:1},8,["default-active"]),e("div",xe,[v(R,{type:"primary",plain:"",size:"small",onClick:a[0]||(a[0]=ae=>T.$router.push("/login"))},{default:p(()=>a[10]||(a[10]=[y("登录")])),_:1,__:[10]}),v(R,{type:"success",plain:"",size:"small",onClick:a[1]||(a[1]=ae=>T.$router.push("/register"))},{default:p(()=>a[11]||(a[11]=[y("注册")])),_:1,__:[11]})])])]),_:1}),v(B,null,{default:p(()=>[(E(),S(me,null,[K()?(E(),S(x(J),{key:0})):O("",!0)],1024)),K()?O("",!0):(E(),S(x(J),{key:0}))]),_:1}),v(Y,null,{default:p(()=>a[13]||(a[13]=[e("div",{class:"footer-content"},[e("div",{class:"footer-logo"},[e("h2",null,"国学经典"),e("p",null,"传承国学经典，弘扬中华文化")]),e("div",{class:"footer-links"},[e("div",{class:"link-group"},[e("h3",null,"关于我们"),e("a",{href:"#"},"网站介绍"),e("a",{href:"#"},"联系方式"),e("a",{href:"#"},"加入我们")]),e("div",{class:"link-group"},[e("h3",null,"学习资源"),e("a",{href:"/books"},"经典书籍"),e("a",{href:"/quotes"},"名句赏析"),e("a",{href:"/courses"},"国学讲堂"),e("a",{href:"/quiz"},"知识测验")]),e("div",{class:"link-group"},[e("h3",null,"用户中心"),e("a",{href:"/learning-center"},"个人学习"),e("a",{href:"/community"},"学习社区"),e("a",{href:"/notes"},"学习笔记")])])],-1),e("div",{class:"copyright"},[e("p",null,"© 2023-2024 国学经典学习网站 - 传承中华文化，弘扬国学精神")],-1)])),_:1,__:[13]})]),_:1}),n.value?(E(),L("div",$e,[v(C,{to:"/",class:"nav-item"},{default:p(()=>a[14]||(a[14]=[e("i",{class:"mobile-nav-icon"},"🏠",-1),e("span",null,"首页",-1)])),_:1,__:[14]}),v(C,{to:"/books",class:"nav-item"},{default:p(()=>a[15]||(a[15]=[e("i",{class:"mobile-nav-icon"},"📚",-1),e("span",null,"书籍",-1)])),_:1,__:[15]}),v(C,{to:"/quiz",class:"nav-item"},{default:p(()=>a[16]||(a[16]=[e("i",{class:"mobile-nav-icon"},"📝",-1),e("span",null,"测验",-1)])),_:1,__:[16]}),v(C,{to:"/courses",class:"nav-item"},{default:p(()=>a[17]||(a[17]=[e("i",{class:"mobile-nav-icon"},"🎓",-1),e("span",null,"讲堂",-1)])),_:1,__:[17]}),v(C,{to:"/learning-center",class:"nav-item"},{default:p(()=>a[18]||(a[18]=[e("i",{class:"mobile-nav-icon"},"👤",-1),e("span",null,"我的",-1)])),_:1,__:[18]})])):O("",!0),s.value?(E(),S(x(t),{key:1,visible:s.value,onClose:V},null,8,["visible"])):O("",!0),v(ze)],2)}}}),Fe=W(Be,[["__scopeId","data-v-cdd1ae12"]]),re=(r,t,o)=>{const i=r[t];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((n,l)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(l.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==o?". Note that variables only represent file names one level deep.":""))))})},P=r=>()=>{const t=()=>re(Object.assign({"../views/AboutView.vue":()=>u(()=>import("./AboutView-296lhRp_.js"),__vite__mapDeps([5,1,2,3,6])),"../views/BookDetailView.vue":()=>u(()=>import("./BookDetailView-Cd7MkpXc.js"),__vite__mapDeps([7,1,2,3,8])),"../views/BookReadView.vue":()=>u(()=>import("./BookReadView-DrKC62dv.js"),__vite__mapDeps([9,1,2,3,10])),"../views/BooksView.vue":()=>u(()=>import("./BooksView-Sjl6j7KM.js"),__vite__mapDeps([11,1,2,3,12])),"../views/CommunityView.vue":()=>u(()=>import("./CommunityView-CVZ_LZJ2.js"),__vite__mapDeps([13,1,2,3,14])),"../views/CoursesView.vue":()=>u(()=>import("./CoursesView-De-lzx_q.js"),__vite__mapDeps([15,1,2,3,16])),"../views/FestivalView.vue":()=>u(()=>import("./FestivalView-e99Mi1jq.js"),__vite__mapDeps([17,1])),"../views/ForgotPasswordView.vue":()=>u(()=>import("./ForgotPasswordView-B62w7pLQ.js"),__vite__mapDeps([18,1,2,3,19])),"../views/HomeView.vue":()=>u(()=>import("./HomeView-CcJI2Iiu.js"),__vite__mapDeps([20,1,2,3,21])),"../views/ImagesTestView.vue":()=>u(()=>import("./ImagesTestView-BnraDeN7.js"),__vite__mapDeps([22,1,2,3,23])),"../views/LearningCenterView.vue":()=>u(()=>import("./LearningCenterView-C1im3Z_2.js"),__vite__mapDeps([24,1,2,3,25])),"../views/LoginView.vue":()=>u(()=>import("./LoginView-yys2zCQD.js"),__vite__mapDeps([26,1,2,3,27])),"../views/QuizPlayView.vue":()=>u(()=>import("./QuizPlayView-CdiB2L3q.js"),__vite__mapDeps([28,1,2,3,29])),"../views/QuizResultView.vue":()=>u(()=>import("./QuizResultView-BKTauwfI.js"),__vite__mapDeps([30,1,2,3,31])),"../views/QuizView.vue":()=>u(()=>import("./QuizView-BsUpdNfx.js"),__vite__mapDeps([32,1,2,3,33])),"../views/QuotesView.vue":()=>u(()=>import("./QuotesView-DFz4NPjn.js"),__vite__mapDeps([34,1,2,3,35])),"../views/RegisterView.vue":()=>u(()=>import("./RegisterView-CS7j7YW-.js"),__vite__mapDeps([36,1,2,3,37])),"../views/UserOnboardingView.vue":()=>u(()=>import("./UserOnboardingView-cnYkhZm4.js"),__vite__mapDeps([38,1,2,3,39])),"../views/UserProfileView.vue":()=>u(()=>import("./UserProfileView-B_hkmcTa.js"),__vite__mapDeps([40,1,2,3,41]))}),`../views/${r}.vue`,3);return t(),t()},w=r=>()=>re(Object.assign({"../views/AboutView.vue":()=>u(()=>import("./AboutView-296lhRp_.js"),__vite__mapDeps([5,1,2,3,6])),"../views/BookDetailView.vue":()=>u(()=>import("./BookDetailView-Cd7MkpXc.js"),__vite__mapDeps([7,1,2,3,8])),"../views/BookReadView.vue":()=>u(()=>import("./BookReadView-DrKC62dv.js"),__vite__mapDeps([9,1,2,3,10])),"../views/BooksView.vue":()=>u(()=>import("./BooksView-Sjl6j7KM.js"),__vite__mapDeps([11,1,2,3,12])),"../views/CommunityView.vue":()=>u(()=>import("./CommunityView-CVZ_LZJ2.js"),__vite__mapDeps([13,1,2,3,14])),"../views/CoursesView.vue":()=>u(()=>import("./CoursesView-De-lzx_q.js"),__vite__mapDeps([15,1,2,3,16])),"../views/FestivalView.vue":()=>u(()=>import("./FestivalView-e99Mi1jq.js"),__vite__mapDeps([17,1])),"../views/ForgotPasswordView.vue":()=>u(()=>import("./ForgotPasswordView-B62w7pLQ.js"),__vite__mapDeps([18,1,2,3,19])),"../views/HomeView.vue":()=>u(()=>import("./HomeView-CcJI2Iiu.js"),__vite__mapDeps([20,1,2,3,21])),"../views/ImagesTestView.vue":()=>u(()=>import("./ImagesTestView-BnraDeN7.js"),__vite__mapDeps([22,1,2,3,23])),"../views/LearningCenterView.vue":()=>u(()=>import("./LearningCenterView-C1im3Z_2.js"),__vite__mapDeps([24,1,2,3,25])),"../views/LoginView.vue":()=>u(()=>import("./LoginView-yys2zCQD.js"),__vite__mapDeps([26,1,2,3,27])),"../views/QuizPlayView.vue":()=>u(()=>import("./QuizPlayView-CdiB2L3q.js"),__vite__mapDeps([28,1,2,3,29])),"../views/QuizResultView.vue":()=>u(()=>import("./QuizResultView-BKTauwfI.js"),__vite__mapDeps([30,1,2,3,31])),"../views/QuizView.vue":()=>u(()=>import("./QuizView-BsUpdNfx.js"),__vite__mapDeps([32,1,2,3,33])),"../views/QuotesView.vue":()=>u(()=>import("./QuotesView-DFz4NPjn.js"),__vite__mapDeps([34,1,2,3,35])),"../views/RegisterView.vue":()=>u(()=>import("./RegisterView-CS7j7YW-.js"),__vite__mapDeps([36,1,2,3,37])),"../views/UserOnboardingView.vue":()=>u(()=>import("./UserOnboardingView-cnYkhZm4.js"),__vite__mapDeps([38,1,2,3,39])),"../views/UserProfileView.vue":()=>u(()=>import("./UserProfileView-B_hkmcTa.js"),__vite__mapDeps([40,1,2,3,41]))}),`../views/${r}.vue`,3),$=_e({history:ve("/guoxue-classic/"),routes:[{path:"/",name:"home",component:P("HomeView"),meta:{title:"首页 - 国学经典",requiresAuth:!1}},{path:"/books",name:"books",component:P("BooksView"),meta:{title:"经典书籍 - 国学经典",requiresAuth:!1}},{path:"/book/:id",name:"book-detail",component:w("BookDetailView"),meta:{title:"书籍详情 - 国学经典",requiresAuth:!1}},{path:"/book/read/:id",name:"book-read",component:w("BookReadView"),meta:{title:"阅读经典 - 国学经典",requiresAuth:!1}},{path:"/quotes",name:"quotes",component:w("QuotesView"),meta:{title:"国学名句赏析 - 国学经典",requiresAuth:!1}},{path:"/login",name:"login",component:P("LoginView"),meta:{title:"登录 - 国学经典",requiresAuth:!1}},{path:"/register",name:"register",component:P("RegisterView"),meta:{title:"注册 - 国学经典",requiresAuth:!1}},{path:"/about",name:"about",component:w("AboutView"),meta:{title:"关于我们 - 国学经典",requiresAuth:!1}},{path:"/community",name:"community",component:w("CommunityView"),meta:{title:"学习社区 - 国学经典",requiresAuth:!1}},{path:"/learning-center",name:"learning-center",component:w("LearningCenterView"),meta:{title:"个人学习中心 - 国学经典",requiresAuth:!0}},{path:"/courses",name:"courses",component:w("CoursesView"),meta:{title:"国学讲堂 - 国学经典",requiresAuth:!1}},{path:"/quiz",name:"quiz",component:w("QuizView"),meta:{title:"国学知识测验 - 国学经典",requiresAuth:!1}},{path:"/quiz/:type",name:"quiz-play",component:w("QuizPlayView"),meta:{title:"答题中 - 国学经典",requiresAuth:!1}},{path:"/quiz/result/:id",name:"quiz-result",component:w("QuizResultView"),meta:{title:"测验结果 - 国学经典",requiresAuth:!1}},{path:"/quiz/leaderboard",name:"quiz-leaderboard",component:w("QuizView"),props:{activeTab:"leaderboard"},meta:{title:"排行榜 - 国学经典",requiresAuth:!1}},{path:"/quiz/history",name:"quiz-history",component:w("QuizView"),props:{activeTab:"history"},meta:{title:"测验历史 - 国学经典",requiresAuth:!0}},{path:"/quiz/review/:id",name:"quiz-review",component:w("QuizPlayView"),props:{isReviewMode:!0},meta:{title:"测验回顾 - 国学经典",requiresAuth:!0}},{path:"/festivals",name:"festivals",component:w("FestivalView"),meta:{title:"传统节日 - 国学经典",requiresAuth:!1}},{path:"/forgot-password",name:"forgot-password",component:P("ForgotPasswordView"),meta:{title:"找回密码 - 国学经典",requiresAuth:!1}},{path:"/onboarding",name:"onboarding",component:P("UserOnboardingView"),meta:{title:"新用户引导 - 国学经典",requiresAuth:!0}},{path:"/profile",name:"profile",component:P("UserProfileView"),meta:{title:"个人资料 - 国学经典",requiresAuth:!0}},{path:"/images-test",name:"images-test",component:w("ImagesTestView"),meta:{title:"图片测试 - 国学经典",requiresAuth:!1}},{path:"/:pathMatch(.*)*",name:"not-found",component:w("HomeView"),meta:{title:"页面未找到 - 国学经典",requiresAuth:!1}}],scrollBehavior(r,t,o){return o||(r.hash?{el:r.hash,behavior:"smooth"}:{top:0,behavior:"smooth"})}});$.beforeEach((r,t,o)=>{const i=localStorage.getItem("isLoggedIn")==="true";r.meta.requiresAuth&&!i?o({name:"login",query:{redirect:r.fullPath}}):i&&!localStorage.getItem("userOnboardingCompleted")&&r.name!=="onboarding"&&r.name!=="login"&&r.name!=="register"?o({name:"onboarding"}):(r.meta.title&&(document.title=r.meta.title),o())});const Qe=["src","alt","width","height","data-original-src","data-image-type"],Ne={key:0,class:"image-loading"},He={key:1,class:"image-error-actions"},Me=H({__name:"ImageWithFallback",props:{src:{},alt:{default:""},type:{default:"default"},width:{default:"auto"},height:{default:"auto"},class:{default:""},lazy:{type:Boolean,default:!0},retryOnClick:{type:Boolean,default:!0}},setup(r){const t=r,o=b(t.src),i=b(!1),n=b(!1),l=b(t.src),s=b(null),c=()=>{n.value=!0,s.value&&(k.handleImageError(s.value,t.type,l.value),s.value.getAttribute("data-original-src")!==l.value&&s.value.setAttribute("data-original-src",l.value))},_=()=>{i.value=!0,n.value=!1},d=()=>{t.retryOnClick&&n.value&&(o.value=l.value,n.value=!1,i.value=!1)},h=()=>{const m=`图片加载失败
${t.alt||"未知图片"}`,V=l.value.split("/").pop()||"image";k.generatePlaceholderImage(t.type,m,`placeholder-${V}`)},A=()=>{const m=Array.from(document.querySelectorAll("img[data-original-src]")).map(V=>V.getAttribute("data-original-src")).filter(Boolean);m.length>0&&k.batchGeneratePlaceholders(m,t.type)};return pe(()=>t.src,m=>{l.value=m,o.value=m,n.value=!1,i.value=!1}),M(()=>{s.value&&s.value.complete&&s.value.naturalWidth===0&&c()}),(m,V)=>(E(),L("div",{class:N(["image-wrapper",{"image-error":n.value,"image-loaded":i.value}])},[e("img",{ref_key:"imgRef",ref:s,src:o.value,alt:m.alt,width:m.width,height:m.height,class:N(["image-with-fallback",[m.lazy?"lazy":""]]),onError:c,onLoad:_,onClick:d,"data-original-src":l.value,"data-image-type":m.type},null,42,Qe),!i.value&&!n.value?(E(),L("div",Ne,V[0]||(V[0]=[e("div",{class:"spinner"},null,-1)]))):O("",!0),n.value?(E(),L("div",He,[e("button",{class:"retry-button",onClick:Q(d,["stop"]),title:"重试加载"},"重试"),e("button",{class:"download-button",onClick:Q(h,["stop"]),title:"下载占位图"}," 下载 "),e("button",{class:"generate-all-button",onClick:Q(A,["stop"]),title:"下载所有失败图片的占位图"}," 全部下载 ")])):O("",!0)],2))}}),Ge=W(Me,[["__scopeId","data-v-d515020d"]]),q=fe(Fe);q.use(he());q.use($);q.use(ge);q.component("ImageWithFallback",Ge);$.beforeEach((r,t,o)=>{o()});$.afterEach(r=>{});q.mount("#app");k.initGlobalImageErrorHandler();export{W as _,k as i};
