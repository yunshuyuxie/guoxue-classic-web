import{d as T,f,c as k,v as u,x as s,Q as b,I as i,A as m,L as t,W as p,D as v,F as n,X as x,ag as V,w as d}from"./vue-DO4TrDDV.js";import{_ as U}from"./index-FWtf0PY5.js";import"./tiny-BodeErl7.js";const R={class:"register-container"},$={class:"register-card"},q={class:"form-group"},S={key:0,class:"error-message"},I={class:"form-group"},B={key:0,class:"error-message"},D={class:"form-group"},E={key:0,class:"error-message"},M={class:"form-group"},N={key:0,class:"error-message"},F={class:"form-group sms-code-group"},L={class:"sms-code-input"},z=["disabled"],A={key:0,class:"error-message"},Q={class:"form-group"},W={key:0,class:"error-message"},X={class:"form-terms"},j={key:0,class:"error-message"},G=["disabled"],H={class:"register-footer"},J=T({__name:"RegisterView",setup(K){const w=V(),a=f({username:"",password:"",confirmPassword:"",phone:"",smsCode:"",email:"",agreeTerms:!1}),c=f(!1),g=f(60),h=f(null),e=f({username:"",password:"",confirmPassword:"",phone:"",smsCode:"",email:"",agreeTerms:""}),C=k(()=>a.value.username&&a.value.password&&a.value.confirmPassword&&a.value.phone&&a.value.smsCode&&a.value.agreeTerms),_=()=>{if(!/^1[3-9]\d{9}$/.test(a.value.phone)){e.value.phone="请输入正确的手机号";return}e.value.phone="",c.value=!0,g.value=60,h.value=window.setInterval(()=>{g.value--,g.value<=0&&(clearInterval(h.value),c.value=!1)},1e3),alert(`验证码已发送至 ${a.value.phone}`)},y=()=>{let o=!1;a.value.username?a.value.username.length<3?(e.value.username="用户名长度不能少于3个字符",o=!0):e.value.username="":(e.value.username="请输入用户名",o=!0),a.value.password?a.value.password.length<6?(e.value.password="密码长度不能少于6个字符",o=!0):e.value.password="":(e.value.password="请输入密码",o=!0),a.value.confirmPassword?a.value.confirmPassword!==a.value.password?(e.value.confirmPassword="两次输入的密码不一致",o=!0):e.value.confirmPassword="":(e.value.confirmPassword="请确认密码",o=!0),a.value.phone?/^1[3-9]\d{9}$/.test(a.value.phone)?e.value.phone="":(e.value.phone="请输入正确的手机号",o=!0):(e.value.phone="请输入手机号",o=!0),a.value.smsCode?/^\d{6}$/.test(a.value.smsCode)?e.value.smsCode="":(e.value.smsCode="验证码格式错误",o=!0):(e.value.smsCode="请输入验证码",o=!0),a.value.email&&!/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.test(a.value.email)?(e.value.email="请输入正确的邮箱格式",o=!0):e.value.email="",a.value.agreeTerms?e.value.agreeTerms="":(e.value.agreeTerms="请阅读并同意用户协议和隐私政策",o=!0),!o&&(alert("注册成功，即将跳转到登录页面"),w.push("/login"))},P=()=>{w.push("/login")};return(o,r)=>(d(),u("div",R,[s("div",$,[r[15]||(r[15]=s("div",{class:"register-header"},[s("h2",null,"注册国学经典账号"),s("p",null,"加入我们，开启国学学习之旅")],-1)),s("form",{onSubmit:b(y,["prevent"]),class:"register-form"},[s("div",q,[r[7]||(r[7]=s("label",{for:"username"},[t("用户名 "),s("span",{class:"required"},"*")],-1)),i(s("input",{type:"text",id:"username","onUpdate:modelValue":r[0]||(r[0]=l=>a.value.username=l),placeholder:"请设置用户名（3-20个字符）",class:v({error:e.value.username})},null,2),[[p,a.value.username]]),e.value.username?(d(),u("div",S,n(e.value.username),1)):m("",!0)]),s("div",I,[r[8]||(r[8]=s("label",{for:"password"},[t("密码 "),s("span",{class:"required"},"*")],-1)),i(s("input",{type:"password",id:"password","onUpdate:modelValue":r[1]||(r[1]=l=>a.value.password=l),placeholder:"请设置密码（不少于6位）",class:v({error:e.value.password})},null,2),[[p,a.value.password]]),e.value.password?(d(),u("div",B,n(e.value.password),1)):m("",!0)]),s("div",D,[r[9]||(r[9]=s("label",{for:"confirmPassword"},[t("确认密码 "),s("span",{class:"required"},"*")],-1)),i(s("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":r[2]||(r[2]=l=>a.value.confirmPassword=l),placeholder:"请再次输入密码",class:v({error:e.value.confirmPassword})},null,2),[[p,a.value.confirmPassword]]),e.value.confirmPassword?(d(),u("div",E,n(e.value.confirmPassword),1)):m("",!0)]),s("div",M,[r[10]||(r[10]=s("label",{for:"phone"},[t("手机号 "),s("span",{class:"required"},"*")],-1)),i(s("input",{type:"tel",id:"phone","onUpdate:modelValue":r[3]||(r[3]=l=>a.value.phone=l),placeholder:"请输入手机号",class:v({error:e.value.phone}),maxlength:"11"},null,2),[[p,a.value.phone]]),e.value.phone?(d(),u("div",N,n(e.value.phone),1)):m("",!0)]),s("div",F,[r[11]||(r[11]=s("label",{for:"smsCode"},[t("验证码 "),s("span",{class:"required"},"*")],-1)),s("div",L,[i(s("input",{type:"text",id:"smsCode","onUpdate:modelValue":r[4]||(r[4]=l=>a.value.smsCode=l),placeholder:"请输入验证码",class:v({error:e.value.smsCode}),maxlength:"6"},null,2),[[p,a.value.smsCode]]),s("button",{type:"button",class:"sms-code-button",onClick:_,disabled:c.value},n(c.value?`重新发送(${g.value}s)`:"获取验证码"),9,z)]),e.value.smsCode?(d(),u("div",A,n(e.value.smsCode),1)):m("",!0)]),s("div",Q,[r[12]||(r[12]=s("label",{for:"email"},"邮箱（选填）",-1)),i(s("input",{type:"email",id:"email","onUpdate:modelValue":r[5]||(r[5]=l=>a.value.email=l),placeholder:"请输入邮箱地址",class:v({error:e.value.email})},null,2),[[p,a.value.email]]),e.value.email?(d(),u("div",W,n(e.value.email),1)):m("",!0)]),s("div",X,[s("label",{class:v(["terms-label",{"terms-error":e.value.agreeTerms}])},[i(s("input",{type:"checkbox","onUpdate:modelValue":r[6]||(r[6]=l=>a.value.agreeTerms=l)},null,512),[[x,a.value.agreeTerms]]),r[13]||(r[13]=s("span",null,[t("我已阅读并同意 "),s("a",{href:"#"},"《用户协议》"),t(" 和 "),s("a",{href:"#"},"《隐私政策》")],-1))],2),e.value.agreeTerms?(d(),u("div",j,n(e.value.agreeTerms),1)):m("",!0)]),s("button",{type:"submit",class:"register-button",disabled:!C.value},"注册",8,G)],32),s("div",H,[s("p",null,[r[14]||(r[14]=t("已有账号? ")),s("a",{href:"#",onClick:b(P,["prevent"])},"立即登录")])])])]))}}),ee=U(J,[["__scopeId","data-v-dd83ce0b"]]);export{ee as default};
