import{d as M,f as d,c as S,v as n,x as s,D as i,Q as g,I as p,A as b,W as f,F as v,X as k,y as $,L as I,ag as L,w as r}from"./vue-DO4TrDDV.js";import{_ as T}from"./index-DoG3l_uc.js";import"./tiny-BkDNni7d.js";const U={class:"login-container"},N={class:"login-card"},R={class:"login-tabs"},B={class:"form-group"},D={key:0,class:"error-message"},E={class:"form-group"},q={key:0,class:"error-message"},F={class:"form-options"},z={class:"remember-me"},A=["disabled"],Q={class:"form-group"},W={key:0,class:"error-message"},X={class:"form-group sms-code-group"},j={class:"sms-code-input"},G=["disabled"],H={key:0,class:"error-message"},J={class:"form-options"},K={class:"remember-me"},O=["disabled"],P={class:"login-footer"},Y=M({__name:"LoginView",setup(Z){const w=L(),u=d("password"),a=d({username:"",password:"",phone:"",smsCode:"",rememberMe:!1}),m=d(!1),c=d(60),h=d(null),o=d({username:"",password:"",phone:"",smsCode:""}),C=S(()=>u.value==="password"?a.value.username&&a.value.password:a.value.phone&&a.value.smsCode),x=()=>{if(!/^1[3-9]\d{9}$/.test(a.value.phone)){o.value.phone="请输入正确的手机号";return}o.value.phone="",m.value=!0,c.value=60,h.value=window.setInterval(()=>{c.value--,c.value<=0&&(clearInterval(h.value),m.value=!1)},1e3),alert(`验证码已发送至 ${a.value.phone}`)},y=()=>{let t=!1;u.value==="password"?(a.value.username?o.value.username="":(o.value.username="请输入用户名",t=!0),a.value.password?o.value.password="":(o.value.password="请输入密码",t=!0)):(a.value.phone?/^1[3-9]\d{9}$/.test(a.value.phone)?o.value.phone="":(o.value.phone="请输入正确的手机号",t=!0):(o.value.phone="请输入手机号",t=!0),a.value.smsCode?/^\d{6}$/.test(a.value.smsCode)?o.value.smsCode="":(o.value.smsCode="验证码格式错误",t=!0):(o.value.smsCode="请输入验证码",t=!0)),!t&&(localStorage.setItem("isLoggedIn","true"),w.push("/"))},_=t=>{u.value=t,o.value={username:"",password:"",phone:"",smsCode:""}},V=()=>{w.push("/register")};return(t,e)=>(r(),n("div",U,[s("div",N,[e[17]||(e[17]=s("div",{class:"login-header"},[s("h2",null,"欢迎登录国学经典"),s("p",null,"传承经典，滋养心灵")],-1)),s("div",R,[s("div",{class:i(["login-tab",{active:u.value==="password"}]),onClick:e[0]||(e[0]=l=>_("password"))}," 账号密码登录 ",2),s("div",{class:i(["login-tab",{active:u.value==="phone"}]),onClick:e[1]||(e[1]=l=>_("phone"))}," 手机号快捷登录 ",2)]),u.value==="password"?(r(),n("form",{key:0,onSubmit:g(y,["prevent"]),class:"login-form"},[s("div",B,[e[8]||(e[8]=s("label",{for:"username"},"用户名",-1)),p(s("input",{type:"text",id:"username","onUpdate:modelValue":e[2]||(e[2]=l=>a.value.username=l),placeholder:"请输入用户名/邮箱",class:i({error:o.value.username})},null,2),[[f,a.value.username]]),o.value.username?(r(),n("div",D,v(o.value.username),1)):b("",!0)]),s("div",E,[e[9]||(e[9]=s("label",{for:"password"},"密码",-1)),p(s("input",{type:"password",id:"password","onUpdate:modelValue":e[3]||(e[3]=l=>a.value.password=l),placeholder:"请输入密码",class:i({error:o.value.password})},null,2),[[f,a.value.password]]),o.value.password?(r(),n("div",q,v(o.value.password),1)):b("",!0)]),s("div",F,[s("label",z,[p(s("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=l=>a.value.rememberMe=l)},null,512),[[k,a.value.rememberMe]]),e[10]||(e[10]=s("span",null,"记住我",-1))]),e[11]||(e[11]=s("a",{href:"#",class:"forgot-password"},"忘记密码?",-1))]),s("button",{type:"submit",class:"login-button",disabled:!C.value},"登录",8,A)],32)):(r(),n("form",{key:1,onSubmit:g(y,["prevent"]),class:"login-form"},[s("div",Q,[e[12]||(e[12]=s("label",{for:"phone"},"手机号",-1)),p(s("input",{type:"tel",id:"phone","onUpdate:modelValue":e[5]||(e[5]=l=>a.value.phone=l),placeholder:"请输入手机号",class:i({error:o.value.phone}),maxlength:"11"},null,2),[[f,a.value.phone]]),o.value.phone?(r(),n("div",W,v(o.value.phone),1)):b("",!0)]),s("div",X,[e[13]||(e[13]=s("label",{for:"smsCode"},"验证码",-1)),s("div",j,[p(s("input",{type:"text",id:"smsCode","onUpdate:modelValue":e[6]||(e[6]=l=>a.value.smsCode=l),placeholder:"请输入验证码",class:i({error:o.value.smsCode}),maxlength:"6"},null,2),[[f,a.value.smsCode]]),s("button",{type:"button",class:"sms-code-button",onClick:x,disabled:m.value},v(m.value?`重新发送(${c.value}s)`:"获取验证码"),9,G)]),o.value.smsCode?(r(),n("div",H,v(o.value.smsCode),1)):b("",!0)]),s("div",J,[s("label",K,[p(s("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=l=>a.value.rememberMe=l)},null,512),[[k,a.value.rememberMe]]),e[14]||(e[14]=s("span",null,"记住我",-1))])]),s("button",{type:"submit",class:"login-button",disabled:!C.value},"登录",8,O)],32)),s("div",P,[s("p",null,[e[15]||(e[15]=I("还没有账号? ")),s("a",{href:"#",onClick:g(V,["prevent"])},"立即注册")]),e[16]||(e[16]=$('<div class="other-login" data-v-14196b35><p data-v-14196b35>其他登录方式</p><div class="social-logins" data-v-14196b35><span class="social-icon wechat" data-v-14196b35></span><span class="social-icon weibo" data-v-14196b35></span><span class="social-icon qq" data-v-14196b35></span></div></div>',1))])])]))}}),ae=T(Y,[["__scopeId","data-v-14196b35"]]);export{ae as default};
