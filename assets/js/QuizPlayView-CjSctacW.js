import{d as B,f as w,c as k,l as N,v as l,D as b,x as t,A as f,F as g,J as H,O as D,P as $,I as V,W as E,V as F,L as j,w as o,a9 as G,o as K,z as U,ag as J}from"./vue-2Nd6u6r3.js";import{_ as O}from"./index-BsYwLi1t.js";import"./tiny-B--Sm0qK.js";const W={class:"question-header"},X={class:"question-progress"},Y={class:"question-number"},Z={class:"progress-bar"},ee={class:"timer-text"},te={class:"timer-progress"},se={class:"question-content"},ie=["innerHTML"],ne={key:0,class:"question-source"},oe={key:0,class:"question-image"},le=["src","alt"],ae={key:0,class:"options-container"},ue=["onClick"],re={class:"option-marker"},ce=["innerHTML"],de={class:"option-status"},ve={key:0,class:"correct-icon"},me={key:1,class:"incorrect-icon"},fe={key:1,class:"options-container"},we=["onClick"],qe={class:"option-marker"},ye=["innerHTML"],ge={class:"option-status"},pe={key:0,class:"correct-icon"},ke={key:1,class:"incorrect-icon"},he={key:2,class:"fill-in-container"},Ae={class:"fill-in-input-container"},_e=["disabled"],Le={key:0,class:"fill-in-result"},Ce={key:0,class:"correct-answer"},xe={key:1,class:"incorrect-answer"},be={class:"incorrect-text"},ze={key:0},Te={key:1},Pe={key:3,class:"explanation-container"},Me=["innerHTML"],Qe={key:0,class:"knowledge-points"},Re={class:"knowledge-points-content"},Ie={class:"actions-container"},Se=["disabled"],De={class:"button-text"},$e=B({__name:"QuizQuestion",props:{question:{type:Object,required:!0},index:{type:Number,required:!0},total:{type:Number,required:!0},isReviewMode:{type:Boolean,default:!1},timeRemaining:{type:Number,default:0},userAnswer:{type:[Number,Array,String],default:null}},emits:["answer","next","previous"],setup(i,{emit:M}){const s=i,h=M,c=w(s.userAnswer),u=w(!1),d=w(!1),z=w(s.isReviewMode),r=w(!1),m=w(!1),y=w(s.userAnswer||""),v=k(()=>s.question.type?s.question.type:Array.isArray(s.question.options)&&s.question.options.length>0?s.question.multiple?"multiple":"single":s.question.fillIn?"fill-in":"single"),A=k(()=>s.question.image&&s.question.image.trim()!==""),C=a=>{if(!(u.value&&!s.isReviewMode))if(v.value==="multiple"){Array.isArray(c.value)||(c.value=[]);const e=c.value.indexOf(a);e>=0?c.value.splice(e,1):c.value.push(a)}else c.value=a},p=a=>v.value==="multiple"?Array.isArray(c.value)&&c.value.includes(a):c.value===a,T=()=>{if(u.value&&!s.isReviewMode)return;let a;if(v.value==="fill-in"?a=y.value:a=c.value,v.value==="multiple"){const e=s.question.answer;Array.isArray(a)&&Array.isArray(e)&&a.length===e.length?d.value=e.every(q=>a.includes(q))&&a.every(q=>e.includes(q)):d.value=!1}else v.value==="fill-in"?Array.isArray(s.question.answer)?d.value=s.question.answer.some(e=>e.toLowerCase()===a.toLowerCase().trim()):d.value=s.question.answer.toLowerCase()===a.toLowerCase().trim():d.value=a===s.question.answer;u.value=!0,z.value=!0,d.value?(r.value=!0,setTimeout(()=>{r.value=!1},1e3)):(m.value=!0,setTimeout(()=>{m.value=!1},1e3)),h("answer",{questionId:s.question.id,userAnswer:a,isCorrect:d.value})},Q=()=>{h("next")},R=()=>{h("previous")},I=k(()=>{if(s.timeRemaining<=0)return"00:00";const a=Math.floor(s.timeRemaining/60),e=s.timeRemaining%60;return`${a.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}),x=k(()=>s.question.timeLimit?s.timeRemaining/s.question.timeLimit*100:100),_=k(()=>s.question.timeLimit?s.timeRemaining<=10:!1);return N(()=>{if(s.isReviewMode){if(u.value=!0,c.value=s.userAnswer,v.value==="multiple"){const a=s.question.answer;Array.isArray(s.userAnswer)&&Array.isArray(a)&&(d.value=a.every(e=>s.userAnswer.includes(e))&&s.userAnswer.every(e=>a.includes(e)))}else v.value==="fill-in"?Array.isArray(s.question.answer)?d.value=s.question.answer.some(a=>a.toLowerCase()===s.userAnswer.toLowerCase().trim()):d.value=s.question.answer.toLowerCase()===s.userAnswer.toLowerCase().trim():d.value=s.userAnswer===s.question.answer;y.value=s.userAnswer||""}}),(a,e)=>(o(),l("div",{class:b(["quiz-question",{answered:u.value,correct:d.value&&u.value,incorrect:!d.value&&u.value}])},[t("div",W,[t("div",X,[t("span",Y,g(i.index+1)+"/"+g(i.total),1),t("div",Z,[e[1]||(e[1]=t("div",{class:"progress-track"},null,-1)),t("div",{class:"progress-fill",style:H({width:`${(i.index+1)/i.total*100}%`})},null,4)])]),i.timeRemaining>0?(o(),l("div",{key:0,class:b(["timer",{"running-out":_.value}])},[e[3]||(e[3]=t("div",{class:"timer-icon"},"⏱️",-1)),t("div",ee,g(I.value),1),t("div",te,[e[2]||(e[2]=t("div",{class:"timer-track"},null,-1)),t("div",{class:"timer-fill",style:H({width:`${x.value}%`})},null,4)])],2)):f("",!0)]),t("div",se,[t("div",{class:b(["question-text",{"with-image":A.value}])},[t("h3",{innerHTML:i.question.question},null,8,ie),i.question.source?(o(),l("div",ne,"——《"+g(i.question.source)+"》",1)):f("",!0)],2),A.value?(o(),l("div",oe,[t("img",{src:i.question.image,alt:i.question.question},null,8,le)])):f("",!0)]),v.value==="single"?(o(),l("div",ae,[(o(!0),l(D,null,$(i.question.options,(q,n)=>(o(),l("div",{key:n,class:b(["option",{selected:p(n),"correct-option":u.value&&i.question.answer===n,"incorrect-option":u.value&&p(n)&&i.question.answer!==n,"animate-correct":r.value&&i.question.answer===n,"animate-incorrect":m.value&&p(n)&&i.question.answer!==n}]),onClick:S=>C(n)},[t("div",re,g(["A","B","C","D","E","F","G","H"][n]),1),t("div",{class:"option-text",innerHTML:q},null,8,ce),t("div",de,[u.value&&i.question.answer===n?(o(),l("div",ve,"✓")):f("",!0),u.value&&p(n)&&i.question.answer!==n?(o(),l("div",me," ✗ ")):f("",!0)])],10,ue))),128))])):f("",!0),v.value==="multiple"?(o(),l("div",fe,[e[4]||(e[4]=t("div",{class:"multiple-choice-hint"},"【多选题】",-1)),(o(!0),l(D,null,$(i.question.options,(q,n)=>(o(),l("div",{key:n,class:b(["option multiple",{selected:p(n),"correct-option":u.value&&i.question.answer.includes(n),"incorrect-option":u.value&&p(n)&&!i.question.answer.includes(n),"animate-correct":r.value&&i.question.answer.includes(n),"animate-incorrect":m.value&&p(n)&&!i.question.answer.includes(n)}]),onClick:S=>C(n)},[t("div",qe,g(["A","B","C","D","E","F","G","H"][n]),1),t("div",{class:"option-text",innerHTML:q},null,8,ye),t("div",ge,[u.value&&i.question.answer.includes(n)?(o(),l("div",pe,"✓")):f("",!0),u.value&&p(n)&&!i.question.answer.includes(n)?(o(),l("div",ke," ✗ ")):f("",!0)])],10,we))),128))])):f("",!0),v.value==="fill-in"?(o(),l("div",he,[e[8]||(e[8]=t("div",{class:"fill-in-hint"},"【填空题】",-1)),t("div",Ae,[V(t("input",{type:"text",class:"fill-in-input","onUpdate:modelValue":e[0]||(e[0]=q=>y.value=q),placeholder:"请输入答案",disabled:u.value&&!i.isReviewMode,onKeyup:F(T,["enter"])},null,40,_e),[[E,y.value]])]),u.value?(o(),l("div",Le,[d.value?(o(),l("div",Ce,e[5]||(e[5]=[t("div",{class:"correct-icon"},"✓",-1),t("div",{class:"correct-text"},"回答正确",-1)]))):(o(),l("div",xe,[e[7]||(e[7]=t("div",{class:"incorrect-icon"},"✗",-1)),t("div",be,[e[6]||(e[6]=j(" 正确答案： ")),Array.isArray(i.question.answer)?(o(),l("span",ze,g(i.question.answer.join(" 或 ")),1)):(o(),l("span",Te,g(i.question.answer),1))])]))])):f("",!0)])):f("",!0),z.value&&i.question.explanation?(o(),l("div",Pe,[e[10]||(e[10]=t("div",{class:"explanation-header"},[t("div",{class:"explanation-icon"},"📝"),t("div",{class:"explanation-title"},"解析")],-1)),t("div",{class:"explanation-content",innerHTML:i.question.explanation},null,8,Me),i.question.knowledgePoints?(o(),l("div",Qe,[e[9]||(e[9]=t("div",{class:"knowledge-points-header"},"知识点",-1)),t("div",Re,[(o(!0),l(D,null,$(i.question.knowledgePoints,(q,n)=>(o(),l("div",{key:n,class:"knowledge-point"},g(q),1))),128))])])):f("",!0)])):f("",!0),t("div",Ie,[i.index>0?(o(),l("button",{key:0,class:"action-button previous",onClick:R},e[11]||(e[11]=[t("span",{class:"button-icon"},"←",-1),t("span",{class:"button-text"},"上一题",-1)]))):f("",!0),!u.value&&!i.isReviewMode?(o(),l("button",{key:1,class:"action-button submit",onClick:T,disabled:v.value==="single"&&c.value===null||v.value==="multiple"&&(!Array.isArray(c.value)||c.value.length===0)||v.value==="fill-in"&&y.value.trim()===""}," 提交答案 ",8,Se)):f("",!0),u.value||i.isReviewMode?(o(),l("button",{key:2,class:"action-button next",onClick:Q},[t("span",De,g(i.index===i.total-1?"完成测验":"下一题"),1),e[12]||(e[12]=t("span",{class:"button-icon"},"→",-1))])):f("",!0)])],2))}}),He=O($e,[["__scopeId","data-v-3487914f"]]),Be={class:"quiz-play"},Ne={class:"quiz-header"},Oe={class:"quiz-title"},Ve={key:0,class:"loading-container"},Ee={key:1,class:"quiz-container"},Fe=B({__name:"QuizPlayView",setup(i){const M=G(),s=J(),h=k(()=>M.params.type),c=k(()=>h.value==="daily"),u=k(()=>h.value==="challenge"),d=w(!0),z=k(()=>{if(c.value)return"每日一题";if(u.value)return"进阶挑战";switch(h.value){case"classics":return"经典常识测验";case"quotes":return"名句填空测验";case"figures":return"人物典故测验";case"culture":return"文化常识测验";default:return"国学知识测验"}}),r=w({id:"",title:"",description:"",questions:[],timeLimit:0}),m=w(0),y=w([]),v=w(null),A=w(0),C=w(0),p=w(!1),T=()=>{setTimeout(()=>{c.value?r.value={id:"daily-"+new Date().toISOString().split("T")[0],title:"每日一题",description:"测试今日知识要点",timeLimit:0,questions:[{id:1001,question:'《论语》"学而时习之，不亦说乎"中的"说"字应解释为：',options:["悦","阅","说","税"],answer:0,explanation:'"说"通"悦"，表示高兴、愉快的意思。这句话的意思是"学习知识并且经常温习它，不也是很快乐的事情吗？"',source:"《论语·学而》",difficulty:"入门级",knowledgePoints:["《论语》","古文字通假"]}]}:u.value?R():Q(),y.value=Array(r.value.questions.length).fill(null),r.value.timeLimit>0&&(A.value=r.value.timeLimit,I()),d.value=!1},1e3)},Q=()=>{const L={classics:{title:"经典常识测验",description:"测试您对四书五经等经典著作的了解",questions:[{id:101,question:"四书是指：",options:["《大学》《中庸》《论语》《孟子》","《诗经》《尚书》《礼记》《周易》","《春秋》《左传》《公羊传》《谷梁传》","《道德经》《庄子》《列子》《文子》"],answer:0,explanation:"四书是指《大学》《中庸》《论语》《孟子》，是宋代理学家朱熹选定并注释的儒家经典著作。",source:"儒家经典",difficulty:"入门级",knowledgePoints:["四书五经","儒家经典"]},{id:102,question:"《道德经》的作者是：",options:["老子","庄子","孔子","孟子"],answer:0,explanation:'《道德经》又称《老子》，是道家学派创始人老子（李耳）的著作，共五千余字，分为"道经"和"德经"两部分。',source:"道家经典",difficulty:"入门级",knowledgePoints:["道家经典","老子"]},{id:103,question:'下列哪部作品不属于"史记五大名篇"？',options:["项羽本纪","廉颇蔺相如列传","屈原贾生列传","孙子兵法"],answer:3,explanation:"《史记》五大名篇通常指《项羽本纪》《廉颇蔺相如列传》《屈原贾生列传》《陈涉世家》《淮阴侯列传》。《孙子兵法》是著名兵法，非《史记》中的篇章。",source:"《史记》",difficulty:"普通级",knowledgePoints:["史记","古代文学作品"]}]},quotes:{title:"名句填空测验",description:"完成古诗文名句中的空缺部分",questions:[{id:201,question:"会当凌绝顶，_______。（杜甫《望岳》）",fillIn:!0,answer:"一览众山小",explanation:'完整诗句为"会当凌绝顶，一览众山小"，出自唐代诗人杜甫的《望岳》，表达了诗人登上泰山顶峰，俯视群山的壮阔情景和豪迈气概。',source:"《望岳》",difficulty:"入门级",knowledgePoints:["唐诗","杜甫"]},{id:202,question:"________，疑是地上霜。（李白《静夜思》）",fillIn:!0,answer:"床前明月光",explanation:'完整诗句为"床前明月光，疑是地上霜"，出自唐代诗人李白的《静夜思》，描绘了月光洒在床前，诗人误以为是地上的霜的情景。',source:"《静夜思》",difficulty:"入门级",knowledgePoints:["唐诗","李白"]},{id:203,question:"小荷才露尖尖角，_______。（杨万里《小池》）",fillIn:!0,answer:["早有蜻蜓立上头","早有青蜓立上头"],explanation:'完整诗句为"小荷才露尖尖角，早有蜻蜓立上头"，出自南宋诗人杨万里的《小池》，描绘了初夏小池塘中的生机勃勃景象。',source:"《小池》",difficulty:"普通级",knowledgePoints:["宋诗","杨万里"]}]},figures:{title:"人物典故测验",description:"了解古代名人及其相关历史典故",questions:[{id:301,question:'"负荆请罪"的主人公是：',options:["廉颇","蔺相如","李牧","白起"],answer:0,explanation:'"负荆请罪"典故出自《史记·廉颇蔺相如列传》，廉颇因误会而怨恨蔺相如，后知道蔺相如以国家利益为重而不与自己计较，感到惭愧，于是背着荆条去向蔺相如请罪。',source:"《史记·廉颇蔺相如列传》",difficulty:"普通级",knowledgePoints:["历史典故","战国人物"]},{id:302,question:'"东山再起"典故中的主人公是：',options:["谢安","范仲淹","王羲之","陶渊明"],answer:0,explanation:'"东山再起"典故源于晋朝的谢安，他隐居会稽东山多年后重新出山辅佐朝政，后成为比喻失势之后重新恢复地位的成语。',source:"《晋书·谢安传》",difficulty:"普通级",knowledgePoints:["历史典故","晋代人物"]},{id:303,question:'"望梅止渴"的故事与哪位历史人物有关？',options:["曹操","刘备","孙权","诸葛亮"],answer:0,explanation:'"望梅止渴"典故出自《世说新语》，描述曹操率军行军时士兵口渴，曹操谎称前方有梅林，梅子酸甜可止渴，士兵闻言口中生津，暂时缓解了口渴。',source:"《世说新语》",difficulty:"普通级",knowledgePoints:["历史典故","三国人物"]}]},culture:{title:"文化常识测验",description:"测试中国传统文化知识与风俗习惯",questions:[{id:401,question:"下列哪个节日不属于中国传统四大节日？",options:["春节","端午节","中秋节","元宵节"],answer:3,explanation:"中国传统的四大节日是指春节、清明节、端午节和中秋节。元宵节虽然也是重要传统节日，但不在四大节日之列。",source:"中国传统文化",difficulty:"入门级",knowledgePoints:["传统节日","民俗文化"]},{id:402,question:'中国传统绘画中的"四君子"是指：',options:["梅、兰、竹、菊","松、竹、梅、兰","松、竹、梅、菊","松、柏、梅、兰"],answer:0,explanation:'中国传统绘画中的"四君子"是指梅、兰、竹、菊四种植物，它们分别象征着坚韧不拔、高洁典雅、虚心有节和傲霜不屈的品格。',source:"中国传统文化",difficulty:"普通级",knowledgePoints:["传统绘画","文化象征"]},{id:403,question:"下列哪个不是中国传统的五行学说中的五行之一？",options:["金","木","水","土","气"],answer:4,explanation:'中国传统的五行学说认为世界由金、木、水、火、土五种基本元素构成，并相互制约、相互生成。"气"不是五行之一。',source:"中国古代哲学",difficulty:"普通级",knowledgePoints:["五行学说","中国古代哲学"]}]}};r.value={id:h.value+"-"+Date.now(),...L[h.value]}},R=()=>{r.value={id:"challenge-"+Date.now(),title:"进阶挑战",description:"挑战多种难度的国学知识题目",timeLimit:600,questions:[{id:501,question:"《三字经》开头的句子是：",options:["人之初，性本善","天地玄黄","子曰：学而时习之","老吾老，以及人之老"],answer:0,explanation:'《三字经》是中国古代蒙学读物，开头为"人之初，性本善。性相近，习相远。"表达了人性本善的儒家思想。',source:"《三字经》",difficulty:"入门级",timeLimit:20,knowledgePoints:["蒙学读物","儒家思想"]},{id:502,question:'下列哪位不是"唐宋八大家"之一？',options:["韩愈","柳宗元","欧阳修","李白"],answer:3,explanation:'"唐宋八大家"是指唐宋时期八位散文大家，包括韩愈、柳宗元、欧阳修、苏洵、苏轼、苏辙、王安石和曾巩。李白虽然是著名诗人，但不在其中。',source:"文学史",difficulty:"普通级",timeLimit:25,knowledgePoints:["唐宋八大家","文学史"]},{id:503,question:"以下哪项不是朱熹理学思想的核心概念？",options:["理气","格物致知","诚意正心","无为而治"],answer:3,explanation:'"无为而治"是道家思想的核心概念，而非朱熹理学的核心概念。朱熹理学强调"理气"、"格物致知"、"诚意正心"等概念，体现了儒家思想。',source:"宋明理学",difficulty:"进阶级",timeLimit:30,knowledgePoints:["宋明理学","朱熹","道家思想"]}]}},I=()=>{v.value=setInterval(()=>{A.value>0?(A.value--,C.value++):(a({questionId:_.value.id,userAnswer:y.value[m.value],isCorrect:!1}),m.value<r.value.questions.length-1?e():n())},1e3)},x=()=>{v.value&&(clearInterval(v.value),v.value=null)},_=k(()=>!r.value.questions||r.value.questions.length===0?null:r.value.questions[m.value]),a=L=>{y.value[m.value]=L.userAnswer,r.value.questions[m.value]&&(r.value.questions[m.value].isCorrect=L.isCorrect)},e=()=>{m.value<r.value.questions.length-1?(m.value++,u.value&&_.value.timeLimit&&(A.value=_.value.timeLimit)):n()},q=()=>{m.value>0&&m.value--},n=()=>{x(),p.value=!0;const L={id:r.value.id,title:r.value.title,completedAt:new Date,timeSpent:C.value,questions:r.value.questions,userAnswers:y.value};if(c.value){const P=new Date().toISOString().split("T")[0];localStorage.setItem("lastDailyQuizDate",P)}s.push({name:"quiz-result",params:{id:r.value.id},state:{results:L}})},S=()=>{confirm("确定要放弃本次测验吗？已答题目将不会被保存。")&&(x(),s.push("/quiz"))};return N(()=>{T()}),K(()=>{x()}),(L,P)=>(o(),l("div",Be,[t("div",Ne,[t("h1",Oe,g(z.value),1),t("button",{class:"abandon-button",onClick:S},"放弃测验")]),d.value?(o(),l("div",Ve,P[0]||(P[0]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"加载题目中...",-1)]))):(o(),l("div",Ee,[_.value?(o(),U(He,{key:0,question:_.value,index:m.value,total:r.value.questions.length,"time-remaining":A.value,"user-answer":y.value[m.value],onAnswer:a,onNext:e,onPrevious:q},null,8,["question","index","total","time-remaining","user-answer"])):f("",!0)]))]))}}),Ue=O(Fe,[["__scopeId","data-v-dca2e5a0"]]);export{Ue as default};
