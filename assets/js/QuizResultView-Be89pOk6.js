import{d as $,c as m,v as u,x as t,A as k,F as i,O as b,P as C,J as R,b as D,j as L,H as T,L as Q,ag as P,w as c,aa as I,f as A,l as N}from"./vue-DO4TrDDV.js";import{_ as M}from"./index-D9k0mYov.js";import"./tiny-hb50Bj2_.js";const V={class:"quiz-result"},E={class:"result-header"},F={class:"result-title"},O={class:"result-time"},j={class:"result-overview"},H={class:"result-score-container"},J={class:"result-score"},U={class:"score-value"},G={class:"score-circle-container"},K={class:"score-circle",viewBox:"0 0 100 100"},W=["stroke-dasharray"],X={class:"score-percentage"},Y={class:"result-stats"},Z={class:"stat-item"},ee={class:"stat-value"},te={class:"stat-item"},se={class:"stat-value"},oe={class:"stat-item"},le={class:"stat-value"},re={class:"stat-item"},ie={class:"stat-value"},ne={key:0,class:"analysis-section"},ae={class:"knowledge-mastery"},ue={class:"mastery-header"},ce={class:"mastery-name"},de={class:"mastery-bar-container"},ve={class:"mastery-rate"},fe={class:"mastery-detail"},me={key:1,class:"analysis-section"},ye={class:"difficulty-distribution"},_e={class:"difficulty-header"},he={class:"difficulty-name"},ge={class:"difficulty-rate"},qe={class:"difficulty-bar-container"},pe={class:"difficulty-count"},we={class:"difficulty-bar-bg"},ke={key:2,class:"recommendation-section"},be={class:"recommendation-list"},Ce={class:"recommendation-content"},Re={class:"recommendation-title"},ze={class:"recommendation-type"},xe=$({__name:"QuizResult",props:{results:{type:Object,required:!0},quizType:{type:String,required:!0}},setup(d){const l=d,n=P(),v=m(()=>{if(!l.results.questions||l.results.questions.length===0)return 0;const r=l.results.questions.filter(e=>e.isCorrect).length;return Math.round(r/l.results.questions.length*100)}),y=m(()=>{if(!l.results.questions||l.results.questions.length===0)return 0;const r=Math.round(v.value/100*100),e=l.results.timeBonus||0,a=l.results.difficultyBonus||0;return r+e+a}),h=m(()=>{if(!l.results.questions||l.results.questions.length===0)return[];const r=new Map;return l.results.questions.forEach(e=>{e.knowledgePoints&&Array.isArray(e.knowledgePoints)&&e.knowledgePoints.forEach(a=>{r.has(a)||r.set(a,{name:a,total:0,correct:0});const f=r.get(a);f.total+=1,e.isCorrect&&(f.correct+=1)})}),Array.from(r.values()).map(e=>({...e,masteryRate:e.total>0?Math.round(e.correct/e.total*100):0,masteryLevel:p(e.total>0?Math.round(e.correct/e.total*100):0)})).sort((e,a)=>a.masteryRate-e.masteryRate)}),p=r=>r>=90?{level:"ç²¾é€š",color:"#4caf50"}:r>=70?{level:"ç†Ÿç»ƒ",color:"#8bc34a"}:r>=50?{level:"åŸºç¡€",color:"#ffc107"}:{level:"å¾…åŠ å¼º",color:"#f44336"},g=m(()=>{if(!l.results.questions||l.results.questions.length===0)return[];const r=new Map;return l.results.questions.forEach(e=>{const a=e.difficulty||"æ™®é€š";r.has(a)||r.set(a,{name:a,total:0,correct:0});const f=r.get(a);f.total+=1,e.isCorrect&&(f.correct+=1)}),Array.from(r.values()).map(e=>({...e,correctRate:e.total>0?Math.round(e.correct/e.total*100):0}))}),q=m(()=>h.value.filter(e=>e.masteryRate<70).slice(0,3).map(e=>({title:`${e.name}ä¸“é¢˜è®²è§£`,type:"è¯¾ç¨‹",link:`/courses?topic=${encodeURIComponent(e.name)}`}))),w=()=>{n.push(`/quiz/${l.quizType}`)},s=()=>{n.push(`/quiz/review/${l.results.id}?filter=incorrect`)},_=()=>{n.push("/quiz")},S=()=>{const r=`æˆ‘åœ¨ã€Œå›½å­¦ç»å…¸ã€å®Œæˆäº†${l.results.title}æµ‹éªŒï¼ŒèŽ·å¾—äº†${y.value}åˆ†ï¼Œæ­£ç¡®çŽ‡${v.value}%ï¼`;try{navigator.clipboard.writeText(r).then(()=>{alert("ç»“æžœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œå¯ä»¥åˆ†äº«ç»™å¥½å‹äº†ï¼")})}catch(e){console.error("æ— æ³•å¤åˆ¶åˆ°å‰ªè´´æ¿:",e),alert("æ— æ³•å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶åˆ†äº«ï¼")}};return(r,e)=>{var f,z,x;const a=L("router-link");return c(),u("div",V,[t("div",E,[t("h2",F,i(d.results.title||"æµ‹éªŒç»“æžœ"),1),t("div",O," å®Œæˆæ—¶é—´: "+i(new Date(d.results.completedAt||Date.now()).toLocaleString("zh-CN")),1)]),t("div",j,[t("div",H,[t("div",J,[t("div",U,i(y.value),1),e[0]||(e[0]=t("div",{class:"score-label"},"æ€»åˆ†",-1))]),t("div",G,[(c(),u("svg",K,[e[1]||(e[1]=t("circle",{class:"score-circle-bg",cx:"50",cy:"50",r:"45"},null,-1)),t("circle",{class:"score-circle-progress",cx:"50",cy:"50",r:"45","stroke-dasharray":`${v.value*2.83}, 283`},null,8,W)])),t("div",X,i(v.value)+"%",1)])]),t("div",Y,[t("div",Z,[t("div",ee,i(((f=d.results.questions)==null?void 0:f.length)||0),1),e[2]||(e[2]=t("div",{class:"stat-label"},"æ€»é¢˜æ•°",-1))]),t("div",te,[t("div",se,i(((z=d.results.questions)==null?void 0:z.filter(o=>o.isCorrect).length)||0),1),e[3]||(e[3]=t("div",{class:"stat-label"},"ç­”å¯¹",-1))]),t("div",oe,[t("div",le,i(((x=d.results.questions)==null?void 0:x.filter(o=>!o.isCorrect).length)||0),1),e[4]||(e[4]=t("div",{class:"stat-label"},"ç­”é”™",-1))]),t("div",re,[t("div",ie,i(d.results.timeSpent?Math.floor(d.results.timeSpent/60)+"åˆ†"+d.results.timeSpent%60+"ç§’":"-- --"),1),e[5]||(e[5]=t("div",{class:"stat-label"},"ç”¨æ—¶",-1))])])]),h.value.length>0?(c(),u("div",ne,[e[7]||(e[7]=t("h3",{class:"section-title"},"çŸ¥è¯†æŽŒæ¡åˆ†æž",-1)),t("div",ae,[(c(!0),u(b,null,C(h.value,o=>(c(),u("div",{key:o.name,class:"mastery-item"},[t("div",ue,[t("div",ce,i(o.name),1),t("div",{class:"mastery-level",style:R({color:o.masteryLevel.color})},i(o.masteryLevel.level),5)]),t("div",de,[e[6]||(e[6]=t("div",{class:"mastery-bar-bg"},null,-1)),t("div",{class:"mastery-bar-progress",style:R({width:`${o.masteryRate}%`,backgroundColor:o.masteryLevel.color})},null,4),t("div",ve,i(o.masteryRate)+"%",1)]),t("div",fe,[t("span",null,"ç­”å¯¹ "+i(o.correct)+"/"+i(o.total),1)])]))),128))])])):k("",!0),g.value.length>0?(c(),u("div",me,[e[8]||(e[8]=t("h3",{class:"section-title"},"éš¾åº¦åˆ†å¸ƒ",-1)),t("div",ye,[(c(!0),u(b,null,C(g.value,o=>(c(),u("div",{key:o.name,class:"difficulty-item"},[t("div",_e,[t("div",he,i(o.name),1),t("div",ge,"æ­£ç¡®çŽ‡: "+i(o.correctRate)+"%",1)]),t("div",qe,[t("div",pe,i(o.correct)+"/"+i(o.total),1),t("div",we,[t("div",{class:"difficulty-bar-progress",style:R({width:`${o.correctRate}%`})},null,4)])])]))),128))])])):k("",!0),q.value.length>0?(c(),u("div",ke,[e[11]||(e[11]=t("h3",{class:"section-title"},"æŽ¨èå­¦ä¹ å†…å®¹",-1)),t("div",be,[(c(!0),u(b,null,C(q.value,(o,B)=>(c(),u("div",{key:B,class:"recommendation-item"},[e[10]||(e[10]=t("div",{class:"recommendation-icon"},"ðŸ“š",-1)),t("div",Ce,[t("div",Re,i(o.title),1),t("div",ze,i(o.type),1)]),D(a,{to:o.link,class:"recommendation-link"},{default:T(()=>e[9]||(e[9]=[Q(" æŸ¥çœ‹ ")])),_:2,__:[9]},1032,["to"])]))),128))])])):k("",!0),t("div",{class:"actions-container"},[t("button",{class:"action-button retry",onClick:w},"é‡æ–°æµ‹éªŒ"),t("button",{class:"action-button review",onClick:s},"æŸ¥çœ‹é”™é¢˜"),t("button",{class:"action-button share",onClick:S},"åˆ†äº«ç»“æžœ"),t("button",{class:"action-button home",onClick:_},"è¿”å›žä¸»é¡µ")])])}}}),Ae=M(xe,[["__scopeId","data-v-32066479"]]),$e={class:"quiz-result-view"},De={key:0,class:"loading-container"},Pe={key:1,class:"result-container"},Me=$({__name:"QuizResultView",setup(d){const l=I();P();const n=m(()=>l.params.id),v=A(null),y=A(!0),h=()=>{if(l.query&&l.query.state&&typeof l.query.state=="string")try{const s=JSON.parse(l.query.state);if(s.results){v.value=s.results,y.value=!1;return}}catch(s){console.error("Failed to parse state data",s)}setTimeout(()=>{n.value.includes("daily")?v.value=p():n.value.includes("challenge")?v.value=g():v.value=q(),y.value=!1},1e3)},p=()=>({id:n.value,title:"æ¯æ—¥ä¸€é¢˜",completedAt:new Date,timeSpent:45,questions:[{id:1001,question:'ã€Šè®ºè¯­ã€‹"å­¦è€Œæ—¶ä¹ ä¹‹ï¼Œä¸äº¦è¯´ä¹Ž"ä¸­çš„"è¯´"å­—åº”è§£é‡Šä¸ºï¼š',options:["æ‚¦","é˜…","è¯´","ç¨Ž"],answer:0,userAnswer:0,isCorrect:!0,explanation:'"è¯´"é€š"æ‚¦"ï¼Œè¡¨ç¤ºé«˜å…´ã€æ„‰å¿«çš„æ„æ€ã€‚è¿™å¥è¯çš„æ„æ€æ˜¯"å­¦ä¹ çŸ¥è¯†å¹¶ä¸”ç»å¸¸æ¸©ä¹ å®ƒï¼Œä¸ä¹Ÿæ˜¯å¾ˆå¿«ä¹çš„äº‹æƒ…å—ï¼Ÿ"',source:"ã€Šè®ºè¯­Â·å­¦è€Œã€‹",difficulty:"å…¥é—¨çº§",knowledgePoints:["ã€Šè®ºè¯­ã€‹","å¤æ–‡å­—é€šå‡"]}]}),g=()=>({id:n.value,title:"è¿›é˜¶æŒ‘æˆ˜",completedAt:new Date,timeSpent:180,timeBonus:20,difficultyBonus:30,questions:[{id:501,question:"ã€Šä¸‰å­—ç»ã€‹å¼€å¤´çš„å¥å­æ˜¯ï¼š",options:["äººä¹‹åˆï¼Œæ€§æœ¬å–„","å¤©åœ°çŽ„é»„","å­æ›°ï¼šå­¦è€Œæ—¶ä¹ ä¹‹","è€å¾è€ï¼Œä»¥åŠäººä¹‹è€"],answer:0,userAnswer:0,isCorrect:!0,explanation:'ã€Šä¸‰å­—ç»ã€‹æ˜¯ä¸­å›½å¤ä»£è’™å­¦è¯»ç‰©ï¼Œå¼€å¤´ä¸º"äººä¹‹åˆï¼Œæ€§æœ¬å–„ã€‚æ€§ç›¸è¿‘ï¼Œä¹ ç›¸è¿œã€‚"è¡¨è¾¾äº†äººæ€§æœ¬å–„çš„å„’å®¶æ€æƒ³ã€‚',source:"ã€Šä¸‰å­—ç»ã€‹",difficulty:"å…¥é—¨çº§",knowledgePoints:["è’™å­¦è¯»ç‰©","å„’å®¶æ€æƒ³"]},{id:502,question:'ä¸‹åˆ—å“ªä½ä¸æ˜¯"å”å®‹å…«å¤§å®¶"ä¹‹ä¸€ï¼Ÿ',options:["éŸ©æ„ˆ","æŸ³å®—å…ƒ","æ¬§é˜³ä¿®","æŽç™½"],answer:3,userAnswer:3,isCorrect:!0,explanation:'"å”å®‹å…«å¤§å®¶"æ˜¯æŒ‡å”å®‹æ—¶æœŸå…«ä½æ•£æ–‡å¤§å®¶ï¼ŒåŒ…æ‹¬éŸ©æ„ˆã€æŸ³å®—å…ƒã€æ¬§é˜³ä¿®ã€è‹æ´µã€è‹è½¼ã€è‹è¾™ã€çŽ‹å®‰çŸ³å’Œæ›¾å·©ã€‚æŽç™½è™½ç„¶æ˜¯è‘—åè¯—äººï¼Œä½†ä¸åœ¨å…¶ä¸­ã€‚',source:"æ–‡å­¦å²",difficulty:"æ™®é€šçº§",knowledgePoints:["å”å®‹å…«å¤§å®¶","æ–‡å­¦å²"]},{id:503,question:"ä»¥ä¸‹å“ªé¡¹ä¸æ˜¯æœ±ç†¹ç†å­¦æ€æƒ³çš„æ ¸å¿ƒæ¦‚å¿µï¼Ÿ",options:["ç†æ°”","æ ¼ç‰©è‡´çŸ¥","è¯šæ„æ­£å¿ƒ","æ— ä¸ºè€Œæ²»"],answer:3,userAnswer:1,isCorrect:!1,explanation:'"æ— ä¸ºè€Œæ²»"æ˜¯é“å®¶æ€æƒ³çš„æ ¸å¿ƒæ¦‚å¿µï¼Œè€Œéžæœ±ç†¹ç†å­¦çš„æ ¸å¿ƒæ¦‚å¿µã€‚æœ±ç†¹ç†å­¦å¼ºè°ƒ"ç†æ°”"ã€"æ ¼ç‰©è‡´çŸ¥"ã€"è¯šæ„æ­£å¿ƒ"ç­‰æ¦‚å¿µï¼Œä½“çŽ°äº†å„’å®¶æ€æƒ³ã€‚',source:"å®‹æ˜Žç†å­¦",difficulty:"è¿›é˜¶çº§",knowledgePoints:["å®‹æ˜Žç†å­¦","æœ±ç†¹","é“å®¶æ€æƒ³"]}]}),q=()=>{let s="classics";n.value.includes("quotes")?s="quotes":n.value.includes("figures")?s="figures":n.value.includes("culture")&&(s="culture");const _={classics:"ç»å…¸å¸¸è¯†æµ‹éªŒ",quotes:"åå¥å¡«ç©ºæµ‹éªŒ",figures:"äººç‰©å…¸æ•…æµ‹éªŒ",culture:"æ–‡åŒ–å¸¸è¯†æµ‹éªŒ"};return{id:n.value,title:_[s],completedAt:new Date,timeSpent:240,questions:[{id:101,question:s==="quotes"?"________ï¼Œç–‘æ˜¯åœ°ä¸Šéœœã€‚ï¼ˆæŽç™½ã€Šé™å¤œæ€ã€‹ï¼‰":"å››ä¹¦æ˜¯æŒ‡ï¼š",options:s!=="quotes"?["ã€Šå¤§å­¦ã€‹ã€Šä¸­åº¸ã€‹ã€Šè®ºè¯­ã€‹ã€Šå­Ÿå­ã€‹","ã€Šè¯—ç»ã€‹ã€Šå°šä¹¦ã€‹ã€Šç¤¼è®°ã€‹ã€Šå‘¨æ˜“ã€‹","ã€Šæ˜¥ç§‹ã€‹ã€Šå·¦ä¼ ã€‹ã€Šå…¬ç¾Šä¼ ã€‹ã€Šè°·æ¢ä¼ ã€‹","ã€Šé“å¾·ç»ã€‹ã€Šåº„å­ã€‹ã€Šåˆ—å­ã€‹ã€Šæ–‡å­ã€‹"]:null,fillIn:s==="quotes",answer:s==="quotes"?"åºŠå‰æ˜Žæœˆå…‰":0,userAnswer:s==="quotes"?"åºŠå‰æ˜Žæœˆå…‰":0,isCorrect:!0,explanation:s==="quotes"?'å®Œæ•´è¯—å¥ä¸º"åºŠå‰æ˜Žæœˆå…‰ï¼Œç–‘æ˜¯åœ°ä¸Šéœœ"ï¼Œå‡ºè‡ªå”ä»£è¯—äººæŽç™½çš„ã€Šé™å¤œæ€ã€‹ï¼Œæç»˜äº†æœˆå…‰æ´’åœ¨åºŠå‰ï¼Œè¯—äººè¯¯ä»¥ä¸ºæ˜¯åœ°ä¸Šçš„éœœçš„æƒ…æ™¯ã€‚':"å››ä¹¦æ˜¯æŒ‡ã€Šå¤§å­¦ã€‹ã€Šä¸­åº¸ã€‹ã€Šè®ºè¯­ã€‹ã€Šå­Ÿå­ã€‹ï¼Œæ˜¯å®‹ä»£ç†å­¦å®¶æœ±ç†¹é€‰å®šå¹¶æ³¨é‡Šçš„å„’å®¶ç»å…¸è‘—ä½œã€‚",source:s==="quotes"?"ã€Šé™å¤œæ€ã€‹":"å„’å®¶ç»å…¸",difficulty:"å…¥é—¨çº§",knowledgePoints:s==="quotes"?["å”è¯—","æŽç™½"]:["å››ä¹¦äº”ç»","å„’å®¶ç»å…¸"]},{id:102,question:s==="quotes"?"å°è·æ‰éœ²å°–å°–è§’ï¼Œ_______ã€‚ï¼ˆæ¨ä¸‡é‡Œã€Šå°æ± ã€‹ï¼‰":s==="figures"?'"è´Ÿè†è¯·ç½ª"çš„ä¸»äººå…¬æ˜¯ï¼š':"ã€Šé“å¾·ç»ã€‹çš„ä½œè€…æ˜¯ï¼š",options:s!=="quotes"?s==="figures"?["å»‰é¢‡","è”ºç›¸å¦‚","æŽç‰§","ç™½èµ·"]:["è€å­","åº„å­","å­”å­","å­Ÿå­"]:null,fillIn:s==="quotes",answer:s==="quotes"?"æ—©æœ‰èœ»èœ“ç«‹ä¸Šå¤´":0,userAnswer:s==="quotes"?"æ—©æœ‰èœ»èœ“ç«‹ä¸Šå¤´":2,isCorrect:s!=="figures",explanation:s==="quotes"?'å®Œæ•´è¯—å¥ä¸º"å°è·æ‰éœ²å°–å°–è§’ï¼Œæ—©æœ‰èœ»èœ“ç«‹ä¸Šå¤´"ï¼Œå‡ºè‡ªå—å®‹è¯—äººæ¨ä¸‡é‡Œçš„ã€Šå°æ± ã€‹ï¼Œæç»˜äº†åˆå¤å°æ± å¡˜ä¸­çš„ç”Ÿæœºå‹ƒå‹ƒæ™¯è±¡ã€‚':s==="figures"?'"è´Ÿè†è¯·ç½ª"å…¸æ•…å‡ºè‡ªã€Šå²è®°Â·å»‰é¢‡è”ºç›¸å¦‚åˆ—ä¼ ã€‹ï¼Œå»‰é¢‡å› è¯¯ä¼šè€Œæ€¨æ¨è”ºç›¸å¦‚ï¼ŒåŽçŸ¥é“è”ºç›¸å¦‚ä»¥å›½å®¶åˆ©ç›Šä¸ºé‡è€Œä¸ä¸Žè‡ªå·±è®¡è¾ƒï¼Œæ„Ÿåˆ°æƒ­æ„§ï¼ŒäºŽæ˜¯èƒŒç€è†æ¡åŽ»å‘è”ºç›¸å¦‚è¯·ç½ªã€‚':'ã€Šé“å¾·ç»ã€‹åˆç§°ã€Šè€å­ã€‹ï¼Œæ˜¯é“å®¶å­¦æ´¾åˆ›å§‹äººè€å­ï¼ˆæŽè€³ï¼‰çš„è‘—ä½œï¼Œå…±äº”åƒä½™å­—ï¼Œåˆ†ä¸º"é“ç»"å’Œ"å¾·ç»"ä¸¤éƒ¨åˆ†ã€‚',source:s==="quotes"?"ã€Šå°æ± ã€‹":s==="figures"?"ã€Šå²è®°Â·å»‰é¢‡è”ºç›¸å¦‚åˆ—ä¼ ã€‹":"é“å®¶ç»å…¸",difficulty:"æ™®é€šçº§",knowledgePoints:s==="quotes"?["å®‹è¯—","æ¨ä¸‡é‡Œ"]:s==="figures"?["åŽ†å²å…¸æ•…","æˆ˜å›½äººç‰©"]:["é“å®¶ç»å…¸","è€å­"]}]}},w=m(()=>n.value.includes("daily")?"daily":n.value.includes("challenge")?"challenge":n.value.includes("classics")?"classics":n.value.includes("quotes")?"quotes":n.value.includes("figures")?"figures":n.value.includes("culture")?"culture":"classics");return N(()=>{h()}),(s,_)=>(c(),u("div",$e,[y.value?(c(),u("div",De,_[0]||(_[0]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"åŠ è½½ç»“æžœä¸­...",-1)]))):(c(),u("div",Pe,[D(Ae,{results:v.value,"quiz-type":w.value},null,8,["results","quiz-type"])]))]))}}),Te=M(Me,[["__scopeId","data-v-b5a7bdec"]]);export{Te as default};
